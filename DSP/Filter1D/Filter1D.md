## 컨볼루션

- 시간차 입력과 커널의 MAC 연산
- 유사도를 출력 (패턴인식 관점)
- 원하는 주파수 성분만 filtering (DSP 관점)
  - LPF: 노이즈 제거(blur)
  - HPF: 엣지 검출(변화 강조)

### 1. 구현

- 길이 L인 커널 h[k] (L-tap Kernel; 시스템의 Impulse Response)
- 현재 입력과 이전 N-1 개의 입력을 저장하는 배열 x[n-k]
- Σ h(k)\*x(n-k); [k = 0 ~ N-1] : MAC 연산

```c
float filter(int in)
/*
  1. 길이 L인 배열에 시간 차 입력을 받는다
  2. 컨볼루션 연산을 수행한다
  3. 결과를 txt 파일에 출력한다
*/
{
  static float x[21];
  float h[21] = {
    -0.000306021779757585, 0.00189666282674638, 0.00257299891941012, -0.0090277441097318,
    -0.0075198095107301, 0.0291019349476909, 0.0145629522024416, -0.0807110457423653,
    -0.0210214194708373, 0.308909103630076,  0.523660422383779, 0.308909103630076,
    -0.0210214194708373, -0.0807110457423653,  0.0145629522024416, 0.0291019349476909,
    -0.0075198095107301, -0.0090277441097318,  0.00257299891941012, 0.00189666282674638,
    -0.000306021779757585
  };
  float out = 0;

  x[0] = in;
  for(int i = 0; i < 21; i++)
    x[i] = x[i-1]; // RShift

  for(int i = 0; i < 21; i++)
    out += x[i]*h[i];
  return out;
}

int main(){
  FILE* inf, outf;

}
```

### 2. 검증 (Linux 환경)

- 시뮬레이션/파형: verilator/pyverilator + gtkwave
- 플롯: Numpy, matplotlib, OpenCV, pandas
